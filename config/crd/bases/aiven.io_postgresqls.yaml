---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.15.0
  name: postgresqls.aiven.io
spec:
  group: aiven.io
  names:
    kind: PostgreSQL
    listKind: PostgreSQLList
    plural: postgresqls
    singular: postgresql
  scope: Namespaced
  versions:
    - additionalPrinterColumns:
        - jsonPath: .spec.project
          name: Project
          type: string
        - jsonPath: .spec.cloudName
          name: Region
          type: string
        - jsonPath: .spec.plan
          name: Plan
          type: string
        - jsonPath: .status.state
          name: State
          type: string
      name: v1alpha1
      schema:
        openAPIV3Schema:
          description: |-
            PostgreSQL is the Schema for the postgresql API.
            Info "Exposes secret keys": `POSTGRESQL_HOST`, `POSTGRESQL_PORT`, `POSTGRESQL_DATABASE`, `POSTGRESQL_USER`, `POSTGRESQL_PASSWORD`, `POSTGRESQL_SSLMODE`, `POSTGRESQL_DATABASE_URI`, `POSTGRESQL_CA_CERT`
          properties:
            apiVersion:
              description: |-
                APIVersion defines the versioned schema of this representation of an object.
                Servers should convert recognized schemas to the latest internal value, and
                may reject unrecognized values.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
              type: string
            kind:
              description: |-
                Kind is a string value representing the REST resource this object represents.
                Servers may infer this from the endpoint the client submits requests to.
                Cannot be updated.
                In CamelCase.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
              type: string
            metadata:
              type: object
            spec:
              description: PostgreSQLSpec defines the desired state of postgres instance
              properties:
                authSecretRef:
                  description: Authentication reference to Aiven token in a secret
                  properties:
                    key:
                      minLength: 1
                      type: string
                    name:
                      minLength: 1
                      type: string
                  required:
                    - key
                    - name
                  type: object
                cloudName:
                  description: Cloud the service runs in.
                  maxLength: 256
                  type: string
                connInfoSecretTarget:
                  description: Secret configuration.
                  properties:
                    annotations:
                      additionalProperties:
                        type: string
                      description: Annotations added to the secret
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                    labels:
                      additionalProperties:
                        type: string
                      description: Labels added to the secret
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                    name:
                      description:
                        Name of the secret resource to be created. By default,
                        it is equal to the resource name
                      type: string
                      x-kubernetes-validations:
                        - message: Value is immutable
                          rule: self == oldSelf
                    prefix:
                      description: |-
                        Prefix for the secret's keys.
                        Added "as is" without any transformations.
                        By default, is equal to the kind name in uppercase + underscore, e.g. `KAFKA_`, `REDIS_`, etc.
                      type: string
                  required:
                    - name
                  type: object
                connInfoSecretTargetDisabled:
                  description:
                    When true, the secret containing connection information
                    will not be created, defaults to false. This field cannot be changed
                    after resource creation.
                  type: boolean
                  x-kubernetes-validations:
                    - message: connInfoSecretTargetDisabled is immutable.
                      rule: self == oldSelf
                disk_space:
                  description: |-
                    The disk space of the service, possible values depend on the service type, the cloud provider and the project.
                    Reducing will result in the service re-balancing.
                    The removal of this field does not change the value.
                  pattern: (?i)^[1-9][0-9]*(GiB|G)?$
                  type: string
                maintenanceWindowDow:
                  description:
                    Day of week when maintenance operations should be performed.
                    One monday, tuesday, wednesday, etc.
                  enum:
                    - monday
                    - tuesday
                    - wednesday
                    - thursday
                    - friday
                    - saturday
                    - sunday
                  type: string
                maintenanceWindowTime:
                  description:
                    Time of day when maintenance operations should be performed.
                    UTC time in HH:mm:ss format.
                  maxLength: 8
                  type: string
                plan:
                  description: Subscription plan.
                  maxLength: 128
                  type: string
                powered:
                  default: true
                  description: |-
                    Determines the power state of the service. When `true` (default), the service is running.
                    When `false`, the service is powered off.
                    For more information please see [Aiven documentation](https://aiven.io/docs/platform/concepts/service-power-cycle).
                    Note that:
                    - When set to `false` the annotation `controllers.aiven.io/instance-is-running` is also set to `false`.
                    - Services cannot be created in a powered off state. The value is ignored during creation.
                    - It is highly recommended to not run dependent resources when the service is powered off.
                      Creating a new resource or updating an existing resource that depends on a powered off service will result in an error.
                      Existing resources will need to be manually recreated after the service is powered on.
                    - Existing secrets will not be updated or removed when the service is powered off.
                    - For Kafka services with backups: Topic configuration, schemas and connectors are all backed up, but not the data in topics. All topic data is lost on power off.
                    - For Kafka services without backups: Topic configurations including all topic data is lost on power off.
                  type: boolean
                project:
                  description: Identifies the project this resource belongs to
                  maxLength: 63
                  pattern: ^[a-zA-Z0-9_-]+$
                  type: string
                  x-kubernetes-validations:
                    - message: Value is immutable
                      rule: self == oldSelf
                projectVPCRef:
                  description:
                    ProjectVPCRef reference to ProjectVPC resource to use
                    its ID as ProjectVPCID automatically
                  properties:
                    name:
                      minLength: 1
                      type: string
                    namespace:
                      minLength: 1
                      type: string
                  required:
                    - name
                  type: object
                projectVpcId:
                  description: Identifier of the VPC the service should be in, if any.
                  maxLength: 36
                  type: string
                serviceIntegrations:
                  description:
                    Service integrations to specify when creating a service.
                    Not applied after initial service creation
                  items:
                    description:
                      Service integrations to specify when creating a service.
                      Not applied after initial service creation
                    properties:
                      integrationType:
                        enum:
                          - read_replica
                        type: string
                      sourceServiceName:
                        maxLength: 64
                        minLength: 1
                        type: string
                    required:
                      - integrationType
                      - sourceServiceName
                    type: object
                  maxItems: 1
                  type: array
                  x-kubernetes-validations:
                    - message: Value is immutable
                      rule: self == oldSelf
                tags:
                  additionalProperties:
                    type: string
                  description:
                    Tags are key-value pairs that allow you to categorize
                    services.
                  type: object
                technicalEmails:
                  description:
                    Defines the email addresses that will receive alerts
                    about upcoming maintenance updates or warnings about service instability.
                  items:
                    properties:
                      email:
                        description: Email address.
                        pattern: ^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$
                        type: string
                    required:
                      - email
                    type: object
                  maxItems: 10
                  type: array
                terminationProtection:
                  description:
                    Prevent service from being deleted. It is recommended
                    to have this enabled for all services.
                  type: boolean
                userConfig:
                  description: PostgreSQL specific user configuration options
                  properties:
                    additional_backup_regions:
                      description: Additional Cloud Regions for Backup Replication
                      items:
                        type: string
                      maxItems: 1
                      type: array
                    admin_password:
                      description:
                        Custom password for admin user. Defaults to random
                        string. This must be set only when a new service is being created.
                      maxLength: 256
                      minLength: 8
                      pattern: ^[a-zA-Z0-9-_]+$
                      type: string
                      x-kubernetes-validations:
                        - message: Value is immutable
                          rule: self == oldSelf
                    admin_username:
                      description:
                        Custom username for admin user. This must be set
                        only when a new service is being created.
                      maxLength: 64
                      pattern: ^[_A-Za-z0-9][-._A-Za-z0-9]{0,63}$
                      type: string
                      x-kubernetes-validations:
                        - message: Value is immutable
                          rule: self == oldSelf
                    backup_hour:
                      description:
                        The hour of day (in UTC) when backup for the service
                        is started. New backup is only started if previous backup has
                        already completed.
                      maximum: 23
                      minimum: 0
                      type: integer
                    backup_minute:
                      description:
                        The minute of an hour when backup for the service
                        is started. New backup is only started if previous backup has
                        already completed.
                      maximum: 59
                      minimum: 0
                      type: integer
                    enable_ipv6:
                      description:
                        Register AAAA DNS records for the service, and allow
                        IPv6 packets to service ports
                      type: boolean
                    ip_filter:
                      description:
                        Allow incoming connections from CIDR address block,
                        e.g. '10.20.0.0/16'
                      items:
                        description:
                          CIDR address block, either as a string, or in a
                          dict with an optional description field
                        properties:
                          description:
                            description: Description for IP filter list entry
                            maxLength: 1024
                            type: string
                          network:
                            description: CIDR address block
                            maxLength: 43
                            type: string
                        required:
                          - network
                        type: object
                      maxItems: 8000
                      type: array
                    migration:
                      description: Migrate data from existing server
                      properties:
                        dbname:
                          description: Database name for bootstrapping the initial connection
                          maxLength: 63
                          type: string
                        host:
                          description:
                            Hostname or IP address of the server where to
                            migrate data from
                          maxLength: 255
                          type: string
                        ignore_dbs:
                          description:
                            Comma-separated list of databases, which should
                            be ignored during migration (supported by MySQL and PostgreSQL
                            only at the moment)
                          maxLength: 2048
                          type: string
                        ignore_roles:
                          description:
                            Comma-separated list of database roles, which
                            should be ignored during migration (supported by PostgreSQL
                            only at the moment)
                          maxLength: 2048
                          type: string
                        method:
                          description:
                            The migration method to be used (currently supported
                            only by Redis, Dragonfly, MySQL and PostgreSQL service types)
                          enum:
                            - dump
                            - replication
                          type: string
                        password:
                          description:
                            Password for authentication with the server where
                            to migrate data from
                          maxLength: 256
                          type: string
                        port:
                          description:
                            Port number of the server where to migrate data
                            from
                          maximum: 65535
                          minimum: 1
                          type: integer
                        ssl:
                          description:
                            The server where to migrate data from is secured
                            with SSL
                          type: boolean
                        username:
                          description:
                            User name for authentication with the server
                            where to migrate data from
                          maxLength: 256
                          type: string
                      required:
                        - host
                        - port
                      type: object
                    node_count:
                      description: Number of nodes for the service
                      maximum: 100
                      minimum: 1
                      type: integer
                    pg:
                      description: postgresql.conf configuration values
                      properties:
                        autovacuum_analyze_scale_factor:
                          description:
                            Specifies a fraction of the table size to add
                            to autovacuum_analyze_threshold when deciding whether to
                            trigger an ANALYZE (e.g. `0.2` for 20% of the table size).
                            The default is `0.2`.
                          maximum: 1
                          minimum: 0
                          type: number
                        autovacuum_analyze_threshold:
                          description:
                            Specifies the minimum number of inserted, updated
                            or deleted tuples needed to trigger an ANALYZE in any one
                            table. The default is `50`.
                          maximum: 2147483647
                          minimum: 0
                          type: integer
                        autovacuum_freeze_max_age:
                          description:
                            Specifies the maximum age (in transactions) that
                            a table's pg_class.relfrozenxid field can attain before
                            a VACUUM operation is forced to prevent transaction ID wraparound
                            within the table. The system launches autovacuum processes
                            to prevent wraparound even when autovacuum is otherwise
                            disabled. Changing this parameter causes a service restart.
                          maximum: 1500000000
                          minimum: 200000000
                          type: integer
                        autovacuum_max_workers:
                          description:
                            Specifies the maximum number of autovacuum processes
                            (other than the autovacuum launcher) that may be running
                            at any one time. The default is `3`. Changing this parameter
                            causes a service restart.
                          maximum: 20
                          minimum: 1
                          type: integer
                        autovacuum_naptime:
                          description:
                            Specifies the minimum delay between autovacuum
                            runs on any given database. The delay is measured in seconds.
                            The default is `60`.
                          maximum: 86400
                          minimum: 1
                          type: integer
                        autovacuum_vacuum_cost_delay:
                          description:
                            Specifies the cost delay value that will be used
                            in automatic VACUUM operations. If `-1` is specified, the
                            regular vacuum_cost_delay value will be used. The default
                            is `2` (upstream default).
                          maximum: 100
                          minimum: -1
                          type: integer
                        autovacuum_vacuum_cost_limit:
                          description:
                            Specifies the cost limit value that will be used
                            in automatic VACUUM operations. If `-1` is specified, the
                            regular vacuum_cost_limit value will be used. The default
                            is `-1` (upstream default).
                          maximum: 10000
                          minimum: -1
                          type: integer
                        autovacuum_vacuum_scale_factor:
                          description:
                            Specifies a fraction of the table size to add
                            to autovacuum_vacuum_threshold when deciding whether to
                            trigger a VACUUM (e.g. `0.2` for 20% of the table size).
                            The default is `0.2`.
                          maximum: 1
                          minimum: 0
                          type: number
                        autovacuum_vacuum_threshold:
                          description:
                            Specifies the minimum number of updated or deleted
                            tuples needed to trigger a VACUUM in any one table. The
                            default is `50`.
                          maximum: 2147483647
                          minimum: 0
                          type: integer
                        bgwriter_delay:
                          description:
                            Specifies the delay between activity rounds for
                            the background writer in milliseconds. The default is `200`.
                          maximum: 10000
                          minimum: 10
                          type: integer
                        bgwriter_flush_after:
                          description:
                            Whenever more than bgwriter_flush_after bytes
                            have been written by the background writer, attempt to force
                            the OS to issue these writes to the underlying storage.
                            Specified in kilobytes. Setting of 0 disables forced writeback.
                            The default is `512`.
                          maximum: 2048
                          minimum: 0
                          type: integer
                        bgwriter_lru_maxpages:
                          description:
                            In each round, no more than this many buffers
                            will be written by the background writer. Setting this to
                            zero disables background writing. The default is `100`.
                          maximum: 1073741823
                          minimum: 0
                          type: integer
                        bgwriter_lru_multiplier:
                          description:
                            The average recent need for new buffers is multiplied
                            by bgwriter_lru_multiplier to arrive at an estimate of the
                            number that will be needed during the next round, (up to
                            bgwriter_lru_maxpages). 1.0 represents a “just in time”
                            policy of writing exactly the number of buffers predicted
                            to be needed. Larger values provide some cushion against
                            spikes in demand, while smaller values intentionally leave
                            writes to be done by server processes. The default is `2.0`.
                          maximum: 10
                          minimum: 0
                          type: number
                        deadlock_timeout:
                          description:
                            This is the amount of time, in milliseconds,
                            to wait on a lock before checking to see if there is a deadlock
                            condition. The default is `1000` (upstream default).
                          maximum: 1800000
                          minimum: 500
                          type: integer
                        default_toast_compression:
                          description:
                            Specifies the default TOAST compression method
                            for values of compressible columns. The default is `lz4`.
                            Only available for PostgreSQL 14+.
                          enum:
                            - lz4
                            - pglz
                          type: string
                        idle_in_transaction_session_timeout:
                          description:
                            Time out sessions with open transactions after
                            this number of milliseconds
                          maximum: 604800000
                          minimum: 0
                          type: integer
                        io_combine_limit:
                          description:
                            "EXPERIMENTAL: Controls the largest I/O size
                            in operations that combine I/O in 8kB units. Version 17
                            and up only."
                          maximum: 32
                          minimum: 1
                          type: integer
                        io_max_combine_limit:
                          description:
                            "EXPERIMENTAL: Controls the largest I/O size
                            in operations that combine I/O in 8kB units, and silently
                            limits the user-settable parameter io_combine_limit. Version
                            18 and up only. Changing this parameter causes a service
                            restart."
                          maximum: 128
                          minimum: 1
                          type: integer
                        io_max_concurrency:
                          description:
                            "EXPERIMENTAL: Controls the maximum number of
                            I/O operations that one process can execute simultaneously.
                            Version 18 and up only. Changing this parameter causes a
                            service restart."
                          maximum: 1024
                          minimum: -1
                          type: integer
                        io_method:
                          description:
                            "EXPERIMENTAL: Controls the maximum number of
                            I/O operations that one process can execute simultaneously.
                            Version 18 and up only. Changing this parameter causes a
                            service restart."
                          enum:
                            - io_uring
                            - sync
                            - worker
                          type: string
                        io_workers:
                          description:
                            "EXPERIMENTAL: Number of IO worker processes,
                            for io_method=worker. Version 18 and up only. Changing this
                            parameter causes a service restart."
                          maximum: 32
                          minimum: 1
                          type: integer
                        jit:
                          description:
                            Controls system-wide use of Just-in-Time Compilation
                            (JIT).
                          type: boolean
                        log_autovacuum_min_duration:
                          description:
                            Causes each action executed by autovacuum to
                            be logged if it ran for at least the specified number of
                            milliseconds. Setting this to zero logs all autovacuum actions.
                            Minus-one disables logging autovacuum actions. The default
                            is `1000`.
                          maximum: 2147483647
                          minimum: -1
                          type: integer
                        log_error_verbosity:
                          description:
                            Controls the amount of detail written in the
                            server log for each message that is logged.
                          enum:
                            - DEFAULT
                            - TERSE
                            - VERBOSE
                          type: string
                        log_line_prefix:
                          description: Choose from one of the available log formats.
                          enum:
                            - "'%m [%p] %q[user=%u,db=%d,app=%a] '"
                            - "'%t [%p]: [%l-1] user=%u,db=%d,app=%a,client=%h '"
                            - "'pid=%p,user=%u,db=%d,app=%a,client=%h '"
                            - "'pid=%p,user=%u,db=%d,app=%a,client=%h,txid=%x,qid=%Q
                              '"
                          type: string
                        log_min_duration_statement:
                          description:
                            Log statements that take more than this number
                            of milliseconds to run, -1 disables
                          maximum: 86400000
                          minimum: -1
                          type: integer
                        log_temp_files:
                          description:
                            Log statements for each temporary file created
                            larger than this number of kilobytes, -1 disables
                          maximum: 2147483647
                          minimum: -1
                          type: integer
                        max_connections:
                          description:
                            Sets the PostgreSQL maximum number of concurrent
                            connections to the database server. This is a limited-release
                            parameter. Contact your account team to confirm your eligibility.
                            You cannot decrease this parameter value when set. For services
                            with a read replica, first increase the read replica's value.
                            After the change is applied to the replica, you can increase
                            the primary service's value. Changing this parameter causes
                            a service restart.
                          maximum: 60000
                          minimum: 25
                          type: integer
                        max_files_per_process:
                          description:
                            PostgreSQL maximum number of files that can be
                            open per process. The default is `1000` (upstream default).
                            Changing this parameter causes a service restart.
                          maximum: 4096
                          minimum: 1000
                          type: integer
                        max_locks_per_transaction:
                          description:
                            PostgreSQL maximum locks per transaction. Changing
                            this parameter causes a service restart.
                          maximum: 6400
                          minimum: 64
                          type: integer
                        max_logical_replication_workers:
                          description:
                            PostgreSQL maximum logical replication workers
                            (taken from the pool of max_parallel_workers). The default
                            is `4` (upstream default). Changing this parameter causes
                            a service restart.
                          maximum: 256
                          minimum: 4
                          type: integer
                        max_parallel_workers:
                          description:
                            Sets the maximum number of workers that the system
                            can support for parallel queries. The default is `8` (upstream
                            default).
                          maximum: 96
                          minimum: 0
                          type: integer
                        max_parallel_workers_per_gather:
                          description:
                            Sets the maximum number of workers that can be
                            started by a single Gather or Gather Merge node. The default
                            is `2` (upstream default).
                          maximum: 96
                          minimum: 0
                          type: integer
                        max_pred_locks_per_transaction:
                          description:
                            PostgreSQL maximum predicate locks per transaction.
                            The default is `64` (upstream default). Changing this parameter
                            causes a service restart.
                          maximum: 5120
                          minimum: 64
                          type: integer
                        max_prepared_transactions:
                          description:
                            PostgreSQL maximum prepared transactions. The
                            default is `0`. Changing this parameter causes a service
                            restart.
                          maximum: 10000
                          minimum: 0
                          type: integer
                        max_replication_slots:
                          description:
                            PostgreSQL maximum replication slots. The default
                            is `20`. Changing this parameter causes a service restart.
                          maximum: 256
                          minimum: 8
                          type: integer
                        max_slot_wal_keep_size:
                          description:
                            PostgreSQL maximum WAL size (MB) reserved for
                            replication slots. If `-1` is specified, replication slots
                            may retain an unlimited amount of WAL files. The default
                            is `-1` (upstream default). wal_keep_size minimum WAL size
                            setting takes precedence over this.
                          maximum: 2147483647
                          minimum: -1
                          type: integer
                        max_stack_depth:
                          description:
                            Maximum depth of the stack in bytes. The default
                            is `2097152` (upstream default).
                          maximum: 6291456
                          minimum: 2097152
                          type: integer
                        max_standby_archive_delay:
                          description:
                            Max standby archive delay in milliseconds. The
                            default is `30000` (upstream default).
                          maximum: 43200000
                          minimum: 1
                          type: integer
                        max_standby_streaming_delay:
                          description:
                            Max standby streaming delay in milliseconds.
                            The default is `30000` (upstream default).
                          maximum: 43200000
                          minimum: 1
                          type: integer
                        max_sync_workers_per_subscription:
                          description:
                            Maximum number of synchronization workers per
                            subscription. The default is `2`.
                          maximum: 8
                          minimum: 2
                          type: integer
                        max_wal_senders:
                          description:
                            PostgreSQL maximum WAL senders. The default is
                            `20`. Changing this parameter causes a service restart.
                          maximum: 256
                          minimum: 20
                          type: integer
                        max_worker_processes:
                          description:
                            Sets the maximum number of background processes
                            that the system can support. The default is `8`. Changing
                            this parameter causes a service restart.
                          maximum: 288
                          minimum: 8
                          type: integer
                        password_encryption:
                          description: Chooses the algorithm for encrypting passwords.
                          enum:
                            - md5
                            - scram-sha-256
                          type: string
                        pg_partman_bgw.interval:
                          description:
                            Sets the time interval in seconds to run pg_partman's
                            scheduled tasks. The default is `3600`.
                          maximum: 604800
                          minimum: 3600
                          type: integer
                        pg_partman_bgw.role:
                          description:
                            Controls which role to use for pg_partman's scheduled
                            background tasks.
                          maxLength: 64
                          pattern: ^[_A-Za-z0-9][-._A-Za-z0-9]{0,63}$
                          type: string
                        pg_stat_monitor.pgsm_enable_query_plan:
                          description:
                            Enables or disables query plan monitoring. Changing
                            this parameter causes a service restart. Only available
                            for PostgreSQL 13+.
                          type: boolean
                        pg_stat_monitor.pgsm_max_buckets:
                          description:
                            Sets the maximum number of buckets. Changing
                            this parameter causes a service restart. Only available
                            for PostgreSQL 13+.
                          maximum: 10
                          minimum: 1
                          type: integer
                        pg_stat_statements.track:
                          description:
                            Controls which statements are counted. Specify
                            top to track top-level statements (those issued directly
                            by clients), all to also track nested statements (such as
                            statements invoked within functions), or none to disable
                            statement statistics collection. The default is `top`.
                          enum:
                            - all
                            - none
                            - top
                          type: string
                        temp_file_limit:
                          description:
                            PostgreSQL temporary file limit in KiB, -1 for
                            unlimited
                          maximum: 2147483647
                          minimum: -1
                          type: integer
                        timezone:
                          description: PostgreSQL service timezone
                          maxLength: 64
                          pattern: ^[\w/]*$
                          type: string
                        track_activity_query_size:
                          description:
                            Specifies the number of bytes reserved to track
                            the currently executing command for each active session.
                            Changing this parameter causes a service restart.
                          maximum: 10240
                          minimum: 1024
                          type: integer
                        track_commit_timestamp:
                          description:
                            Record commit time of transactions. Changing
                            this parameter causes a service restart.
                          enum:
                            - "off"
                            - "on"
                          type: string
                        track_functions:
                          description:
                            Enables tracking of function call counts and
                            time used.
                          enum:
                            - all
                            - none
                            - pl
                          type: string
                        track_io_timing:
                          description:
                            Enables timing of database I/O calls. The default
                            is `off`. When on, it will repeatedly query the operating
                            system for the current time, which may cause significant
                            overhead on some platforms.
                          enum:
                            - "off"
                            - "on"
                          type: string
                        wal_sender_timeout:
                          description:
                            Terminate replication connections that are inactive
                            for longer than this amount of time, in milliseconds. Setting
                            this value to zero disables the timeout.
                          type: integer
                        wal_writer_delay:
                          description:
                            WAL flush interval in milliseconds. The default
                            is `200`. Setting this parameter to a lower value may negatively
                            impact performance.
                          maximum: 200
                          minimum: 10
                          type: integer
                      type: object
                    pg_qualstats:
                      description:
                        Deprecated. System-wide settings for the pg_qualstats
                        extension
                      properties:
                        enabled:
                          description: Deprecated. Enable / Disable pg_qualstats
                          type: boolean
                        min_err_estimate_num:
                          description:
                            Deprecated. Error estimation num threshold to
                            save quals
                          minimum: 0
                          type: integer
                        min_err_estimate_ratio:
                          description:
                            Deprecated. Error estimation ratio threshold
                            to save quals
                          minimum: 0
                          type: integer
                        track_constants:
                          description:
                            Deprecated. Enable / Disable pg_qualstats constants
                            tracking
                          type: boolean
                        track_pg_catalog:
                          description: Deprecated. Track quals on system catalogs too.
                          type: boolean
                      type: object
                    pg_read_replica:
                      description:
                        Should the service which is being forked be a read
                        replica (deprecated, use read_replica service integration instead).
                      type: boolean
                    pg_service_to_fork_from:
                      description:
                        Name of the PG Service from which to fork (deprecated,
                        use service_to_fork_from). This has effect only when a new service
                        is being created.
                      maxLength: 64
                      pattern: ^[a-z][-a-z0-9]{0,63}$|^$
                      type: string
                      x-kubernetes-validations:
                        - message: Value is immutable
                          rule: self == oldSelf
                    pg_stat_monitor_enable:
                      description:
                        Enable the pg_stat_monitor extension. Changing this
                        parameter causes a service restart. When this extension is enabled,
                        pg_stat_statements results for utility commands are unreliable
                      type: boolean
                    pg_version:
                      description: |-
                        Available versions: `13`, `14`, `15`, `16`, `17`, `18`. Newer versions may also be available.
                        PostgreSQL major version. Deprecated values: `13`
                      type: string
                    pgaudit:
                      description: System-wide settings for the pgaudit extension.
                      properties:
                        feature_enabled:
                          description:
                            Enable pgaudit extension. When enabled, pgaudit
                            extension will be automatically installed.Otherwise, extension
                            will be uninstalled but auditing configurations will be
                            preserved.
                          type: boolean
                        log:
                          description:
                            Specifies which classes of statements will be
                            logged by session audit logging.
                          items:
                            type: string
                          type: array
                        log_catalog:
                          description:
                            Specifies that session logging should be enabled
                            in the case where all relations in a statement are in pg_catalog.
                          type: boolean
                        log_client:
                          description:
                            Specifies whether log messages will be visible
                            to a client process such as psql.
                          type: boolean
                        log_level:
                          description:
                            Specifies the log level that will be used for
                            log entries.
                          enum:
                            - debug1
                            - debug2
                            - debug3
                            - debug4
                            - debug5
                            - info
                            - log
                            - notice
                            - warning
                          type: string
                        log_max_string_length:
                          description:
                            Crop parameters representation and whole statements
                            if they exceed this threshold. A (default) value of -1 disable
                            the truncation.
                          maximum: 102400
                          minimum: -1
                          type: integer
                        log_nested_statements:
                          description:
                            This GUC allows to turn off logging nested statements,
                            that is, statements that are executed as part of another
                            ExecutorRun.
                          type: boolean
                        log_parameter:
                          description:
                            Specifies that audit logging should include the
                            parameters that were passed with the statement.
                          type: boolean
                        log_parameter_max_size:
                          description:
                            Specifies that parameter values longer than this
                            setting (in bytes) should not be logged, but replaced with
                            <long param suppressed>.
                          type: integer
                        log_relation:
                          description:
                            Specifies whether session audit logging should
                            create a separate log entry for each relation (TABLE, VIEW,
                            etc.) referenced in a SELECT or DML statement.
                          type: boolean
                        log_rows:
                          description: Log Rows
                          type: boolean
                        log_statement:
                          description:
                            Specifies whether logging will include the statement
                            text and parameters (if enabled).
                          type: boolean
                        log_statement_once:
                          description:
                            Specifies whether logging will include the statement
                            text and parameters with the first log entry for a statement/substatement
                            combination or with every entry.
                          type: boolean
                        role:
                          description:
                            Specifies the master role to use for object audit
                            logging.
                          maxLength: 64
                          pattern: ^[_A-Za-z0-9][-._A-Za-z0-9]{0,63}$
                          type: string
                      type: object
                    pgbouncer:
                      description: PGBouncer connection pooling settings
                      properties:
                        autodb_idle_timeout:
                          description:
                            If the automatically created database pools have
                            been unused this many seconds, they are freed. If 0 then
                            timeout is disabled. [seconds]
                          maximum: 86400
                          minimum: 0
                          type: integer
                        autodb_max_db_connections:
                          description:
                            Do not allow more than this many server connections
                            per database (regardless of user). Setting it to 0 means
                            unlimited.
                          maximum: 2147483647
                          minimum: 0
                          type: integer
                        autodb_pool_mode:
                          description: PGBouncer pool mode
                          enum:
                            - session
                            - statement
                            - transaction
                          type: string
                        autodb_pool_size:
                          description:
                            If non-zero then create automatically a pool
                            of that size per user when a pool doesn't exist.
                          maximum: 10000
                          minimum: 0
                          type: integer
                        ignore_startup_parameters:
                          description:
                            List of parameters to ignore when given in startup
                            packet
                          items:
                            type: string
                          maxItems: 32
                          type: array
                        max_prepared_statements:
                          description:
                            PgBouncer tracks protocol-level named prepared
                            statements related commands sent by the client in transaction
                            and statement pooling modes when max_prepared_statements
                            is set to a non-zero value. Setting it to 0 disables prepared
                            statements. max_prepared_statements defaults to 100, and
                            its maximum is 3000.
                          maximum: 3000
                          minimum: 0
                          type: integer
                        min_pool_size:
                          description:
                            Add more server connections to pool if below
                            this number. Improves behavior when usual load comes suddenly
                            back after period of total inactivity. The value is effectively
                            capped at the pool size.
                          maximum: 10000
                          minimum: 0
                          type: integer
                        server_idle_timeout:
                          description:
                            If a server connection has been idle more than
                            this many seconds it will be dropped. If 0 then timeout
                            is disabled. [seconds]
                          maximum: 86400
                          minimum: 0
                          type: integer
                        server_lifetime:
                          description:
                            The pooler will close an unused server connection
                            that has been connected longer than this. [seconds]
                          maximum: 86400
                          minimum: 60
                          type: integer
                        server_reset_query_always:
                          description:
                            Run server_reset_query (DISCARD ALL) in all pooling
                            modes
                          type: boolean
                      type: object
                    pglookout:
                      description: System-wide settings for pglookout.
                      properties:
                        max_failover_replication_time_lag:
                          description:
                            Number of seconds of master unavailability before
                            triggering database failover to standby
                          minimum: 10
                          type: integer
                      type: object
                    private_access:
                      description:
                        Allow access to selected service ports from private
                        networks
                      properties:
                        pg:
                          description:
                            Allow clients to connect to pg with a DNS name
                            that always resolves to the service's private IP addresses.
                            Only available in certain network locations
                          type: boolean
                        pgbouncer:
                          description:
                            Allow clients to connect to pgbouncer with a
                            DNS name that always resolves to the service's private IP
                            addresses. Only available in certain network locations
                          type: boolean
                        prometheus:
                          description:
                            Allow clients to connect to prometheus with a
                            DNS name that always resolves to the service's private IP
                            addresses. Only available in certain network locations
                          type: boolean
                      type: object
                    privatelink_access:
                      description:
                        Allow access to selected service components through
                        Privatelink
                      properties:
                        pg:
                          description: Enable pg
                          type: boolean
                        pgbouncer:
                          description: Enable pgbouncer
                          type: boolean
                        prometheus:
                          description: Enable prometheus
                          type: boolean
                      type: object
                    project_to_fork_from:
                      description:
                        Name of another project to fork a service from. This
                        has effect only when a new service is being created.
                      maxLength: 63
                      pattern: ^[a-z][-a-z0-9]{0,63}$|^$
                      type: string
                      x-kubernetes-validations:
                        - message: Value is immutable
                          rule: self == oldSelf
                    public_access:
                      description:
                        Allow access to selected service ports from the public
                        Internet
                      properties:
                        pg:
                          description:
                            Allow clients to connect to pg from the public
                            internet for service nodes that are in a project VPC or
                            another type of private network
                          type: boolean
                        pgbouncer:
                          description:
                            Allow clients to connect to pgbouncer from the
                            public internet for service nodes that are in a project
                            VPC or another type of private network
                          type: boolean
                        prometheus:
                          description:
                            Allow clients to connect to prometheus from the
                            public internet for service nodes that are in a project
                            VPC or another type of private network
                          type: boolean
                      type: object
                    recovery_target_time:
                      description:
                        Recovery target time when forking a service. This
                        has effect only when a new service is being created.
                      maxLength: 32
                      type: string
                      x-kubernetes-validations:
                        - message: Value is immutable
                          rule: self == oldSelf
                    service_log:
                      description:
                        Store logs for the service so that they are available
                        in the HTTP API and console.
                      type: boolean
                    service_to_fork_from:
                      description:
                        Name of another service to fork from. This has effect
                        only when a new service is being created.
                      maxLength: 64
                      pattern: ^[a-z][-a-z0-9]{0,63}$|^$
                      type: string
                      x-kubernetes-validations:
                        - message: Value is immutable
                          rule: self == oldSelf
                    shared_buffers_percentage:
                      description:
                        Percentage of total RAM that the database server
                        uses for shared memory buffers. Valid range is 20-60 (float),
                        which corresponds to 20% - 60%. This setting adjusts the shared_buffers
                        configuration value. Changing this parameter causes a service
                        restart.
                      maximum: 60
                      minimum: 20
                      type: number
                    static_ips:
                      description: Use static public IP addresses
                      type: boolean
                    synchronous_replication:
                      description:
                        Synchronous replication type. Note that the service
                        plan also needs to support synchronous replication.
                      enum:
                        - "off"
                        - quorum
                      type: string
                    timescaledb:
                      description: System-wide settings for the timescaledb extension
                      properties:
                        max_background_workers:
                          description:
                            The number of background workers for timescaledb
                            operations. You should configure this setting to the sum
                            of your number of databases and the total number of concurrent
                            background workers you want running at any given point in
                            time. Changing this parameter causes a service restart.
                          maximum: 4096
                          minimum: 1
                          type: integer
                      type: object
                    variant:
                      description:
                        Variant of the PostgreSQL service, may affect the
                        features that are exposed by default
                      enum:
                        - aiven
                        - timescale
                      type: string
                    work_mem:
                      description:
                        Sets the maximum amount of memory to be used by a
                        query operation (such as a sort or hash table) before writing
                        to temporary disk files, in MB. The default is 1MB + 0.075%
                        of total RAM (up to 32MB).
                      maximum: 1024
                      minimum: 1
                      type: integer
                  type: object
              required:
                - plan
                - project
              type: object
              x-kubernetes-validations:
                - message:
                    connInfoSecretTargetDisabled can only be set during resource
                    creation.
                  rule: has(oldSelf.connInfoSecretTargetDisabled) == has(self.connInfoSecretTargetDisabled)
            status:
              description: ServiceStatus defines the observed state of service
              properties:
                conditions:
                  description:
                    Conditions represent the latest available observations
                    of a service state
                  items:
                    description:
                      "Condition contains details for one aspect of the current
                      state of this API Resource.\n---\nThis struct is intended for
                      direct use as an array at the field path .status.conditions.  For
                      example,\n\n\n\ttype FooStatus struct{\n\t    // Represents the
                      observations of a foo's current state.\n\t    // Known .status.conditions.type
                      are: \"Available\", \"Progressing\", and \"Degraded\"\n\t    //
                      +patchMergeKey=type\n\t    // +patchStrategy=merge\n\t    // +listType=map\n\t
                      \   // +listMapKey=type\n\t    Conditions []metav1.Condition `json:\"conditions,omitempty\"
                      patchStrategy:\"merge\" patchMergeKey:\"type\" protobuf:\"bytes,1,rep,name=conditions\"`\n\n\n\t
                      \   // other fields\n\t}"
                    properties:
                      lastTransitionTime:
                        description: |-
                          lastTransitionTime is the last time the condition transitioned from one status to another.
                          This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                        format: date-time
                        type: string
                      message:
                        description: |-
                          message is a human readable message indicating details about the transition.
                          This may be an empty string.
                        maxLength: 32768
                        type: string
                      observedGeneration:
                        description: |-
                          observedGeneration represents the .metadata.generation that the condition was set based upon.
                          For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                          with respect to the current state of the instance.
                        format: int64
                        minimum: 0
                        type: integer
                      reason:
                        description: |-
                          reason contains a programmatic identifier indicating the reason for the condition's last transition.
                          Producers of specific condition types may define expected values and meanings for this field,
                          and whether the values are considered a guaranteed API.
                          The value should be a CamelCase string.
                          This field may not be empty.
                        maxLength: 1024
                        minLength: 1
                        pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                        type: string
                      status:
                        description: status of the condition, one of True, False, Unknown.
                        enum:
                          - "True"
                          - "False"
                          - Unknown
                        type: string
                      type:
                        description: |-
                          type of condition in CamelCase or in foo.example.com/CamelCase.
                          ---
                          Many .condition.type values are consistent across resources like Available, but because arbitrary conditions can be
                          useful (see .node.status.conditions), the ability to deconflict is important.
                          The regex it matches is (dns1123SubdomainFmt/)?(qualifiedNameFmt)
                        maxLength: 316
                        pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                        type: string
                    required:
                      - lastTransitionTime
                      - message
                      - reason
                      - status
                      - type
                    type: object
                  type: array
                state:
                  description: Service state
                  type: string
              type: object
          type: object
      served: true
      storage: true
      subresources:
        status: {}
